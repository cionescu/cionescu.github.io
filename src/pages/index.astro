---
import Layout from '~/layouts/PageLayout.astro';

import Image from '~/components/common/Image.astro';
import HomeFooter from '~/components/home/HomeFooter.astro';
import { Icon } from 'astro-icon/components';
import { fetchPosts } from '~/utils/blog';
import { getPermalink } from '~/utils/permalinks';

const metadata = {
  title: 'Catalin Ionescu - Director, Application Engineering @ Mon Ami',
  ignoreTitleTemplate: true,
};

const illustrations = {
  rocket: `<svg viewBox="0 0 200 160" class="w-full h-40" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="100" cy="80" r="60" fill="#DBEAFE" fill-opacity="0.5" />
    <path d="M100 30L120 70H80L100 30Z" fill="#F87171" />
    <rect x="80" y="70" width="40" height="50" fill="#E5E7EB" />
    <path d="M80 70L60 100H80V70Z" fill="#9CA3AF" />
    <path d="M120 70L140 100H120V70Z" fill="#9CA3AF" />
    <path d="M90 120L85 140L95 135L105 140L100 120" fill="#F59E0B" />
    <circle cx="100" cy="90" r="10" fill="#60A5FA" />
    <path d="M40 130C40 118.954 48.9543 110 60 110C64.0846 110 67.8488 111.225 71.0069 113.326C73.3221 105.454 80.5758 100 89 100C99.4934 100 108 108.507 108 119" stroke="#94A3B8" stroke-width="2" stroke-linecap="round" />
    <path d="M160 130C160 118.954 151.046 110 140 110C135.915 110 132.151 111.225 128.993 113.326C126.678 105.454 119.424 100 111 100C100.507 100 92 108.507 92 119" stroke="#94A3B8" stroke-width="2" stroke-linecap="round" />
  </svg>`,
  meeting: `<svg viewBox="0 0 200 160" class="w-full h-40" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="100" cy="80" r="60" fill="#FEF3C7" fill-opacity="0.5" />
    <rect x="60" y="100" width="80" height="40" rx="2" fill="#D1D5DB" />
    <rect x="70" y="100" width="60" height="5" fill="#9CA3AF" />
    <circle cx="50" cy="90" r="15" fill="#4B5563" />
    <path d="M30 140C30 120 70 120 70 140" stroke="#4B5563" stroke-width="20" />
    <circle cx="150" cy="90" r="15" fill="#4B5563" />
    <path d="M130 140C130 120 170 120 170 140" stroke="#4B5563" stroke-width="20" />
    <rect x="80" y="40" width="40" height="30" fill="white" stroke="#9CA3AF" stroke-width="2" />
    <path d="M85 65L95 55L105 60L115 50" stroke="#EF4444" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
  </svg>`,
  cafe: `<svg viewBox="0 0 200 160" class="w-full h-40" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="100" cy="80" r="60" fill="#FFEDD5" fill-opacity="0.5" />
    <rect x="70" y="90" width="60" height="40" rx="4" fill="#374151" />
    <path d="M60 130H140L135 135H65L60 130Z" fill="#1F2937" />
    <path d="M145 100H155C157.761 100 160 102.239 160 105C160 107.761 157.761 110 155 110H145V100Z" stroke="#92400E" stroke-width="2" />
    <path d="M135 100V115C135 120.523 130.523 125 125 125H145C139.477 125 135 120.523 135 115V100Z" fill="#FCD34D" />
    <path d="M140 85Q145 80 140 75" stroke="#9CA3AF" stroke-width="2" stroke-linecap="round" />
    <path d="M135 90Q140 85 135 80" stroke="#9CA3AF" stroke-width="2" stroke-linecap="round" />
  </svg>`,
  consult: `<svg viewBox="0 0 120 120" class="w-full h-full" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="60" cy="60" r="50" fill="#F3F4F6" />
    <path d="M40 60H80M80 60L70 50M80 60L70 70" stroke="#2563EB" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" />
    <circle cx="40" cy="60" r="8" fill="#2563EB" />
    <circle cx="80" cy="60" r="8" fill="#F97316" />
  </svg>`,
  cto: `<svg viewBox="0 0 120 120" class="w-full h-full" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="60" cy="60" r="50" fill="#F3F4F6" />
    <rect x="40" y="40" width="40" height="40" rx="4" stroke="#4B5563" stroke-width="3" fill="white" />
    <path d="M40 55H80" stroke="#4B5563" stroke-width="2" />
    <path d="M50 40V35C50 32.2386 52.2386 30 55 30H65C67.7614 30 70 32.2386 70 35V40" stroke="#4B5563" stroke-width="3" />
  </svg>`,
  product: `<svg viewBox="0 0 120 120" class="w-full h-full" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="60" cy="60" r="50" fill="#F3F4F6" />
    <path d="M40 80L60 40L80 80H40Z" stroke="#F97316" stroke-width="4" stroke-linejoin="round" fill="white" />
    <circle cx="60" cy="65" r="8" fill="#F97316" />
  </svg>`,
};

const posts = await fetchPosts();
const latestIssues = posts
  .slice()
  .sort((a, b) => Number(new Date(b.publishDate)) - Number(new Date(a.publishDate)))
  .slice(0, 10);
---

<Layout metadata={metadata}>
  <main class="flex-grow">
    <section class="pt-16 pb-20 px-4 sm:px-6 lg:px-8 max-w-6xl mx-auto">
      <div class="grid md:grid-cols-2 gap-12 items-center">
        <div class="order-2 md:order-1 space-y-8">
          <div class="space-y-4">
            <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 tracking-tight">Hi there, I'm Catalin üëã</h1>
            <div class="text-lg text-gray-600 leading-relaxed space-y-4">
              <p>I run engineering teams, build products, and solve problems ‚Äî occasionally a computer is involved.</p>
              <p>
                I'm currently <span class="font-semibold text-gray-900">Director of Engineering at Mon Ami</span>, where I
                focus on applying AI to "boring" industries like government and social care.
              </p>
              <p>The past 15 years I've been mostly solving technical challenges and leading software development in one role or the other.</p>
              <p class="text-sm italic text-gray-500">
                As a side thing, I enjoy sharing my experiences and helping developers grow into CTOs / Tech Leads.
              </p>
            </div>
          </div>

          <div class="flex items-center space-x-2">
            <span class="text-sm font-medium text-gray-500 mr-2">Follow me on</span>
            <a
              href="https://www.threads.com/@catalinionescu_"
              class="p-2 text-gray-500 hover:text-accent-orange hover:bg-orange-50 rounded-full transition-all"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="Threads"
            >
              <Icon name="tabler:brand-threads" class="w-5 h-5" />
            </a>
            <a
              href="https://www.linkedin.com/in/ciionescu/"
              class="p-2 text-gray-500 hover:text-accent-orange hover:bg-orange-50 rounded-full transition-all"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="LinkedIn"
            >
              <Icon name="tabler:brand-linkedin" class="w-5 h-5" />
            </a>
            <a
              href="https://twitter.com/cionescu1"
              class="p-2 text-gray-500 hover:text-accent-orange hover:bg-orange-50 rounded-full transition-all"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="Twitter"
            >
              <Icon name="tabler:brand-twitter" class="w-5 h-5" />
            </a>
            <a
              href="https://github.com/cionescu"
              class="p-2 text-gray-500 hover:text-accent-orange hover:bg-orange-50 rounded-full transition-all"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="GitHub"
            >
              <Icon name="tabler:brand-github" class="w-5 h-5" />
            </a>

          </div>
        </div>

        <div class="order-1 md:order-2 flex justify-center md:justify-end">
          <div class="relative w-64 h-64 md:w-80 md:h-80">
            <div class="absolute inset-0 bg-gray-200 rounded-3xl transform rotate-3"></div>
            <div class="absolute inset-0 bg-gray-900 rounded-3xl overflow-hidden transform -rotate-2 shadow-2xl">
              <Image
                class="w-full h-full object-cover grayscale hover:grayscale-0 transition-all duration-500 nolazy"
                widths={[400, 768, 1024, 2040]}
                sizes="(max-width: 767px) 400px, (max-width: 1023px) 768px, (max-width: 2039px) 1024px, 2040px"
                loading="eager"
                width={1024}
                height={1024}
                src="~/assets/images/profile_square.png"
                alt="Catalin Portrait"
              />
            </div>
          </div>
        </div>
      </div>
    </section>

    {/*
    <section class="py-20 bg-white border-y border-gray-100">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16 relative">
          <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
            My <span class="underline decoration-accent-orange decoration-4 underline-offset-4">Ultimate Guides</span>
          </h2>
          <p class="text-gray-600 max-w-2xl mx-auto">
            These are some of my best works that have been read by thousands of people over the past years. You can start
            here.
          </p>

          <div class="hidden md:block absolute top-10 right-1/4 w-24 h-24 pointer-events-none opacity-40">
            <svg viewBox="0 0 100 100" class="w-full h-full transform rotate-12">
              <path
                d="M10,10 Q50,50 90,90"
                fill="none"
                stroke="#1A1A1A"
                stroke-width="2"
                marker-end="url(#arrowhead)"
                class="hand-drawn-arrow"
              />
              <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                  <polygon points="0 0, 10 3.5, 0 7" fill="#1A1A1A" />
                </marker>
              </defs>
            </svg>
          </div>
        </div>

        <div class="grid md:grid-cols-3 gap-8">
          <div class="group relative rounded-2xl p-6 transition-all duration-300 hover:-translate-y-1 hover:shadow-card cursor-pointer border border-transparent hover:border-gray-100 bg-guide-blue">
            <div class="space-y-4">
              <div class="flex items-center justify-between">
                <span class="text-2xl">üöÄ</span>
                <span class="px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider text-green-700 bg-green-100 rounded-full">New</span>
              </div>
              <div class="rounded-xl bg-white/60 p-4">
                <div set:html={illustrations.rocket}></div>
              </div>
              <div class="space-y-2">
                <h3 class="text-xl font-bold text-gray-900 group-hover:text-accent-orange transition-colors">
                  AI in Boring Industries
                </h3>
                <p class="text-sm text-gray-600 leading-relaxed">
                  How to apply modern AI to legacy sectors like government, health, and social care without breaking things.
                </p>
              </div>
            </div>
          </div>

          <div class="group relative rounded-2xl p-6 transition-all duration-300 hover:-translate-y-1 hover:shadow-card cursor-pointer border border-transparent hover:border-gray-100 bg-guide-yellow">
            <div class="space-y-4">
              <div class="flex items-center justify-between">
                <span class="text-2xl">‚ö°</span>
                <span class="px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider text-green-700 bg-green-100 rounded-full">In Progress</span>
              </div>
              <div class="rounded-xl bg-white/60 p-4">
                <div set:html={illustrations.meeting}></div>
              </div>
              <div class="space-y-2">
                <h3 class="text-xl font-bold text-gray-900 group-hover:text-accent-orange transition-colors">No-Bullshit CTO Guide</h3>
                <p class="text-sm text-gray-600 leading-relaxed">
                  I have experience growing from zero to 60+ engineers. This series helps you grow into a great technical leader.
                </p>
              </div>
            </div>
          </div>

          <div class="group relative rounded-2xl p-6 transition-all duration-300 hover:-translate-y-1 hover:shadow-card cursor-pointer border border-transparent hover:border-gray-100 bg-guide-peach">
            <div class="space-y-4">
              <div class="flex items-center justify-between">
                <span class="text-2xl">üõ°Ô∏è</span>
              </div>
              <div class="rounded-xl bg-white/60 p-4">
                <div set:html={illustrations.cafe}></div>
              </div>
              <div class="space-y-2">
                <h3 class="text-xl font-bold text-gray-900 group-hover:text-accent-orange transition-colors">Building Reliable Systems</h3>
                <p class="text-sm text-gray-600 leading-relaxed">
                  A guide based on years of experience building systems in regulated spaces that simply cannot fail.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    */}

    <section class="py-24 px-4 sm:px-6 lg:px-8 max-w-6xl mx-auto">
      <div class="grid md:grid-cols-2 gap-16">
        <div class="space-y-8">
          <div>
            <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
              I help <span class="underline decoration-gray-300 decoration-4 underline-offset-4">leaders</span> grow
            </h2>
            <div class="inline-block px-3 py-1 bg-yellow-100 text-yellow-800 text-xs font-bold rounded-full mb-6">
              79 people joined this week
            </div>
            <p class="text-gray-600 leading-relaxed">
              At my bi-weekly newsletter - I share my thoughts as a Director of Engineering. Some of the topics that I like
              writing about: building digital products, scaling development, and applying AI in the real world.
            </p>
          </div>

          <form class="flex gap-3 max-w-md" action="#" method="post">
            <div class="relative flex-grow">
              <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <Icon name="tabler:mail" class="h-5 w-5 text-gray-400" />
              </div>
              <input
                type="email"
                class="block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-accent-blue focus:border-accent-blue placeholder-gray-400 bg-white"
                placeholder="Email address"
                required
              />
            </div>
            <button
              type="submit"
              class="px-6 py-3 bg-accent-blue text-white font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-sm hover:shadow-md"
            >
              Subscribe
            </button>
          </form>
          <p class="text-xs text-gray-400">Free, no spam, unsubscribe at any time.</p>
        </div>

        <div>
          <h3 class="text-lg font-bold text-gray-900 mb-6 pb-2 border-b border-gray-100">Latest Issues</h3>
          <div class="space-y-1">
            {latestIssues.map((post, idx) => (
              <a
                href={getPermalink(post.permalink, 'post')}
                class="flex items-start gap-3 group p-2 rounded-lg hover:bg-gray-50 transition-colors"
              >
                <span class="text-lg mt-0.5">{post.emoji || '‚≠ê'}</span>
                <span class="text-sm text-gray-600 font-medium group-hover:text-accent-orange group-hover:underline decoration-accent-orange/30 underline-offset-4 transition-all">
                  {post.title}
                </span>
              </a>
            ))}
          </div>
        </div>
      </div>
    </section>

    {/*
    <section class="py-20 bg-white border-t border-gray-100">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
          <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
            I'm an <span class="underline decoration-gray-300 decoration-4 underline-offset-4">expert</span>, let's
            <span class="underline decoration-gray-300 decoration-4 underline-offset-4"> build</span> something
          </h2>
          <p class="text-gray-600 max-w-2xl mx-auto">
            I would love to hear from you about your product and see if I can help you out. I bring quite a bit of experience
            to the table, covering everything from developing the first MVP to scaling teams.
          </p>
        </div>

        <div class="space-y-8">
          <div class="bg-white rounded-2xl p-6 border border-gray-100 shadow-sm hover:shadow-card transition-all duration-300 flex flex-col md:flex-row items-center gap-6 group">
            <div class="w-full md:w-48 h-32 flex-shrink-0 bg-gray-50 rounded-xl overflow-hidden flex items-center justify-center">
              <div class="w-24 h-24" set:html={illustrations.consult}></div>
            </div>
            <div class="flex-1 text-center md:text-left">
              <h3 class="text-xl font-bold text-gray-900 mb-2 group-hover:text-accent-orange transition-colors">One-on-One Consultation</h3>
              <p class="text-gray-600 text-sm mb-4 md:mb-0 max-w-lg">
                I can consult your company and help you kickoff your product / idea. You can send me your questions, and we'll
                organize a 1-hour online session.
              </p>
            </div>
            <div class="flex-shrink-0">
              <a
                href="/contact"
                class="inline-flex px-6 py-2.5 rounded-lg border border-gray-200 text-sm font-medium text-gray-700 hover:border-accent-orange hover:text-accent-orange transition-all bg-white"
              >
                Find out how I can help you
              </a>
            </div>
          </div>

          <div class="bg-white rounded-2xl p-6 border border-gray-100 shadow-sm hover:shadow-card transition-all duration-300 flex flex-col md:flex-row items-center gap-6 group">
            <div class="w-full md:w-48 h-32 flex-shrink-0 bg-gray-50 rounded-xl overflow-hidden flex items-center justify-center">
              <div class="w-24 h-24" set:html={illustrations.cto}></div>
            </div>
            <div class="flex-1 text-center md:text-left">
              <h3 class="text-xl font-bold text-gray-900 mb-2 group-hover:text-accent-orange transition-colors">Fractional CTO / Advisor</h3>
              <p class="text-gray-600 text-sm mb-4 md:mb-0 max-w-lg">
                We'll start with an intensive one day workshop to evaluate your current technology processes, development team performance,
                and possible improvements.
              </p>
            </div>
            <div class="flex-shrink-0">
              <a
                href="/contact"
                class="inline-flex px-6 py-2.5 rounded-lg border border-gray-200 text-sm font-medium text-gray-700 hover:border-accent-orange hover:text-accent-orange transition-all bg-white"
              >
                Scale your development
              </a>
            </div>
          </div>

          <div class="bg-white rounded-2xl p-6 border border-gray-100 shadow-sm hover:shadow-card transition-all duration-300 flex flex-col md:flex-row items-center gap-6 group">
            <div class="w-full md:w-48 h-32 flex-shrink-0 bg-gray-50 rounded-xl overflow-hidden flex items-center justify-center">
              <div class="w-24 h-24" set:html={illustrations.product}></div>
            </div>
            <div class="flex-1 text-center md:text-left">
              <h3 class="text-xl font-bold text-gray-900 mb-2 group-hover:text-accent-orange transition-colors">Build a product together</h3>
              <p class="text-gray-600 text-sm mb-4 md:mb-0 max-w-lg">
                I can help you take your product from Idea to Market in several months. With our experts we can build applications of any complexity.
              </p>
            </div>
            <div class="flex-shrink-0">
              <a
                href="/contact"
                class="inline-flex px-6 py-2.5 rounded-lg border border-gray-200 text-sm font-medium text-gray-700 hover:border-accent-orange hover:text-accent-orange transition-all bg-white"
              >
                Read about the process
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>
    */}
  </main>

  <HomeFooter />
</Layout>

<style is:global>
  .hand-drawn-arrow {
    stroke-dasharray: 100;
    stroke-dashoffset: 100;
    animation: dash 2s ease-out forwards;
  }

  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
</style>
